angular.module("WsClient",["ngWebSocket","ngCookies"]).provider("wsClient",function(){var a="wss://api.scriptrapps.io/",b=null,c=null,d=null,e=null,f=null,g={},h=0,i={};this.setBaseUrl=function(b){a=b},this.setPublishChannel=function(a){b=a},this.setSubscribeChannel=function(a){c=a},this.setToken=function(a){d=a};var j=function(){e=a+"/"+d},k=function(a){return h+=1,h>1e4&&(h=0),h},l=function(a,b){return f+"-"+(b?b+"_"+a:a)},m=function(a,b){return b?b+"_"+a:a},n=function(a,b){return f+"-"+(b?b+"_"+a:a)};this.$get=["$websocket","$cookies","$q","$rootScope",function(a,d,h,o){d.get("token")&&this.setToken(d.get("token")),j();var p=a(e),q={},r=h.defer(),s=h.defer(),t=h.defer();p.onOpen(function(){c&&p.send(JSON.stringify({method:"Subscribe",params:{channel:c}}))}),p.onMessage(function(a){try{var b=JSON.parse(a.data);console.log("Received message data from websocket: ",b),"connected."==b.result&&(f=b.id,r&&r.resolve()),q.data=b,u(b),v(b)}catch(b){console.log("Error when parsing message received over socket",a,b)}}),p.onClose(function(a){console.log("Socket Closed",a),t.resolve(),console.log("Trying to reconnect closed socket."),p.reconnect()}),p.onError(function(a){console.log("Socket Error",a),s.resolve()});var u=function(a){var b=a.id;b&&g.hasOwnProperty(b)?(console.log("Execute registered call back for received socket message.",g[b]),o.$apply(g[b].cb.resolve(a.result)),delete g[b]):console.log("No callbacks registerd for received socket message.")},v=function(a){var b=a.id;if(b&&i.hasOwnProperty(b)){console.log("Execute registered call back for received socket message.",i[b]);for(var c=i[b],d=0;d<c.length;d++)c[d].cb(a.result)}else console.log("No subscribers registerd for received socket message.")},w={getMessage:function(){return q},getStatus:function(){return p.readyState},subscribe:function(a,b){if(c){var b={time:new Date,cb:b};i[a]?i[a].push(b):i[a]=[b]}},publish:function(a,c){if(b){var d=h.defer(),e=k(),f=l(e,c);return g[f]={time:new Date,cb:d},a.id=f,console.log("Sending publish message",a),p.send({method:"Publish",params:{channel:b,message:JSON.stringify(a)}}),d.promise}console.log("No channel is deifned, message won't be sent.",a)},call:function(a,b,c){var d=h.defer(),e={method:a,params:{body:JSON.stringify(b)}},f=k(),i=n(f,c);return g[i]={time:new Date,cb:d},e.id=m(f,c),console.log("Sending call api request over socket.",e),p.send(e),d.promise},closeSocket:function(a){a?p.close(a):p.close(!1)},onReady:r.promise,onError:s.promise,onClose:t.promise};return w}]}),angular.module("HttpClient",["ngCookies"]).provider("httpClient",function(){var a=null,b=null,c="";this.setBaseUrl=function(b){a=b,console.log(a)},this.setToken=function(a){b=a,console.log(b)};var d=function(b){c=a+"/"+b,console.log(c)};this.$get=["$cookies","$q","$http",function(a,e,f){a.get("token")&&(b=a.get("token"));var g=function(a,b,c){return a&&a[b]||(a||(a={}),a[b]=c),a},h=function(a,h){var i=e.defer();return d(a),h.url=c,h.headers=g(h.headers,"Authorization","Bearer "+b),f(h).then(function(a){if(a.data&&a.data.response){var b=a.data.response;"200"==b.metadata.statusCode&&"success"==b.metadata.status?b.result&&b.result.metadata?"200"==b.result.statusCode&&"success"==b.result.status?i.resolve(b.result.result,a):i.reject(b.result.metadata,a):i.resolve(b.result,a):i.reject(b.metadata,a)}},function(a){i.reject(a)}),i.promise},i={get:function(a,b){var c={method:"GET"};return c.params=b,h(a,c)},post:function(a,b,c){var d={method:"POST"};return d.data=b,c&&(d.headers=c),d.headers=g(d.headers,"Content-Type","application/json"),h(a,d)}};return i}]}),angular.module("Odometer",["ui.odometer"]),angular.module("Odometer").component("scriptrOdometer",{bindings:{onLoad:"&onLoad",api:"@",theme:"@",duration:"@",animation:"@",transport:"@",odometerValue:"@",msgTag:"@",apiParams:"<?",size:"<?",onFormatData:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/odometer/odometer.html",controller:["httpClient","wsClient",function(a,b){var c=this;this.$onInit=function(){this.config={duration:this.duration?this.duration:1e3,animation:this.animation?this.animation:"count",theme:this.theme?this.theme:"car"},this.odometerOptions=this.config,this.odometerValue=this.odometerValue?this.odometerValue:0,this.size=this.size?this.size:1,this.transport=this.transport?this.transport:"wss",this.msgTag=this.msgTag?this.msgTag:null,d(this.transport)};var d=function(d){"wss"==d?b.onReady.then(function(){b.subscribe(c.msgTag,c.consumeData.bind(c)),c.api&&b.call(c.api,c.apiParams,c.msgTag).then(function(a,b){c.consumeData(a)})}):"https"==d&&c.api&&a.get(c.api,c.apiParams).then(function(a,b){c.consumeData(a)},function(a){console.log("reject published promise",a)})};this.consumeData=function(a,b){"function"==typeof c.onFormatData()&&(a=c.onFormatData()(a)),this.odometerValue=a}}]}),angular.module("Speedometer",["meterGauge"]),angular.module("Speedometer").component("scriptrSpeedometer",{bindings:{onLoad:"&onLoad",gaugeRadius:"<?",theme:"@",minVal:"<?",maxVal:"<?",needleVal:"<?",tickSpaceMinVal:"<?",tickSpaceMajVal:"<?",gaugeUnits:"@",tickColMaj:"@",tickColMin:"@",outerEdgeCol:"@",pivotCol:"@",innerCol:"@",unitsLabelCol:"@",tickLabelCol:"@",needleCol:"@",defaultFonts:"@",api:"@",transport:"@",msgTag:"@",apiParams:"<?",onFormatData:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/speedometer/speedometer.html",controller:["httpClient","wsClient",function(a,b){var c=this;this.rpmTheme={gaugeRadius:120,minVal:0,maxVal:1e3,needleVal:0,tickSpaceMinVal:10,tickSpaceMajVal:100,gaugeUnits:"kmh",tickColMaj:"#0194D9",tickColMin:"#999999",outerEdgeCol:"#ffffff",pivotCol:"#434A54",innerCol:"#ffffff",unitsLabelCol:"#0194d9",tickLabelCol:"#656D78",needleCol:"#0194d9",defaultFonts:""},this.speedTheme={gaugeRadius:120,minVal:0,maxVal:220,needleVal:0,tickSpaceMinVal:10,tickSpaceMajVal:20,gaugeUnits:"kmh",tickColMaj:"#C64DFF",tickColMin:"#999999",outerEdgeCol:"#f4f4f4",pivotCol:"#434a54",innerCol:"#ffffff",unitsLabelCol:"#C64DFF",tickLabelCol:"#656D78",needleCol:"#C64DFF",defaultFonts:""},this.$onInit=function(){this.theme=this.theme?this.theme:"speed","speed"==this.theme?this.classic=this.speedTheme:"rpm"==this.theme&&(this.classic=this.rpmTheme),this.classic.gaugeRadius=this.gaugeRadius?this.gaugeRadius:this.classic.gaugeRadius,this.classic.minVal=this.minVal?this.minVal:this.classic.minVal,this.classic.maxVal=this.maxVal?this.maxVal:this.classic.maxVal,this.classic.needleVal=this.needleVal?Math.round(this.needleVal):Math.round(this.classic.needleVal),this.classic.tickSpaceMinVal=this.tickSpaceMinVal?this.tickSpaceMinVal:this.classic.tickSpaceMinVal,this.classic.tickSpaceMajVal=this.tickSpaceMajVal?this.tickSpaceMajVal:this.classic.tickSpaceMajVal,this.classic.gaugeUnits=this.gaugeUnits?this.gaugeUnits:this.classic.gaugeUnits,this.classic.tickColMaj=this.tickColMaj?this.tickColMaj:this.classic.tickColMaj,this.classic.tickColMin=this.tickColMin?this.tickColMin:this.classic.tickColMin,this.classic.outerEdgeCol=this.outerEdgeCol?this.outerEdgeCol:this.classic.outerEdgeCol,this.classic.pivotCol=this.pivotCol?this.pivotCol:this.classic.pivotCol,this.classic.innerCol=this.innerCol?this.innerCol:this.classic.innerCol,this.classic.unitsLabelCol=this.unitsLabelCol?this.unitsLabelCol:this.classic.unitsLabelCol,this.classic.tickLabelCol=this.tickLabelCol?this.tickLabelCol:this.classic.tickLabelCol,this.classic.needleCol=this.needleCol?this.needleCol:this.classic.needleCol,this.classic.defaultFonts=this.defaultFonts?this.defaultFonts:this.classic.defaultFonts,this.transport=this.transport?this.transport:"wss",this.msgTag=this.msgTag?this.msgTag:null,d(this.transport)};var d=function(d){"wss"==d?b.onReady.then(function(){b.subscribe(c.msgTag,c.consumeData.bind(c)),c.api&&b.call(c.api,c.apiParams,c.msgTag).then(function(a,b){c.consumeData(a)})}):"https"==d&&c.api&&a.get(c.api,c.apiParams).then(function(a,b){c.consumeData(a)},function(a){console.log("reject published promise",a)})};this.consumeData=function(a,b){"function"==typeof c.onFormatData()&&(a=c.onFormatData()(a)),this.classic.needleVal=Math.round(a)}}]}),function(a,b){"use strict";"undefined"!=typeof module&&module.exports?module.exports=b(require("angular")):"function"==typeof define&&define.amd?define(["angular"],b):b(a.angular)}(window,function(a){"use strict";a.module("angucomplete-alt",[]).directive("angucompleteAlt",["$q","$parse","$http","$sce","$timeout","$templateCache","$interpolate",function(a,b,c,d,e,f,g){function h(b,f,g,h){function w(a,c){a&&("object"==typeof a?(b.searchStr=C(a),z({originalObject:a})):"string"==typeof a&&a.length>0?b.searchStr=a:console&&console.error&&console.error("Tried to set "+(c?"initial":"")+" value of angucomplete to",a,"which is an invalid value"),F(!0))}function x(a){na=null,b.hideResults(a),document.body.removeEventListener("click",x)}function y(a){return a.which?a.which:a.keyCode}function z(a){"function"==typeof b.selectedObject?b.selectedObject(a,b.selectedObjectData):b.selectedObject=a,F(a?!0:!1)}function A(a){return function(c){return b[a]?b[a](c):c}}function B(a){z({originalObject:a}),b.clearSelected&&(b.searchStr=null),U()}function C(a){return b.titleField.split(",").map(function(b){return D(a,b)}).join(" ")}function D(a,b){var c,d;if(b){c=b.split("."),d=a;for(var e=0;e<c.length;e++)d=d[c[e]]}else d=a;return d}function E(a,c){var e,f,g;if(g=new RegExp(c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i"),a)return a.match&&a.replace||(a=a.toString()),f=a.match(g),e=f?a.replace(g,'<span class="'+b.matchClass+'">'+f[0]+"</span>"):a,d.trustAsHtml(e)}function F(a){b.notEmpty=a,ia=b.searchStr,b.fieldRequired&&h&&b.inputName&&h[b.inputName].$setValidity(ha,a)}function G(a){var c=y(a);if(c!==l&&c!==j)if(c===k||c===n)a.preventDefault();else if(c===i)a.preventDefault(),!b.showDropdown&&b.searchStr&&b.searchStr.length>=fa&&(V(),b.searching=!0,Y(b.searchStr));else if(c===m)U(),b.$apply(function(){ea.val(b.searchStr)});else{if(0===fa&&!b.searchStr)return;b.searchStr&&""!==b.searchStr?b.searchStr.length>=fa&&(V(),ga&&e.cancel(ga),b.searching=!0,ga=e(function(){Y(b.searchStr)},b.pause)):b.showDropdown=!1,ia&&ia!==b.searchStr&&!b.clearSelected&&b.$apply(function(){z()})}}function H(a){!b.overrideSuggestions||b.selectedObject&&b.selectedObject.originalObject===b.searchStr||(a&&a.preventDefault(),e.cancel(ga),R(),B(b.searchStr))}function I(a){var b=getComputedStyle(a);return a.offsetHeight+parseInt(b.marginTop,10)+parseInt(b.marginBottom,10)}function J(){return la.getBoundingClientRect().top+parseInt(getComputedStyle(la).maxHeight,10)}function K(){return f[0].querySelectorAll(".angucomplete-row")[b.currentIndex]}function L(){return K().getBoundingClientRect().top-(la.getBoundingClientRect().top+parseInt(getComputedStyle(la).paddingTop,10))}function M(a){la.scrollTop=la.scrollTop+a}function N(){var a=b.results[b.currentIndex];b.matchClass?ea.val(C(a.originalObject)):ea.val(a.title)}function O(a){var c=y(a),d=null,e=null;c===n&&b.results?(b.currentIndex>=0&&b.currentIndex<b.results.length?(a.preventDefault(),b.selectResult(b.results[b.currentIndex])):(H(a),U()),b.$apply()):c===i&&b.results?(a.preventDefault(),b.currentIndex+1<b.results.length&&b.showDropdown&&(b.$apply(function(){b.currentIndex++,N()}),ma&&(d=K(),J()<d.getBoundingClientRect().bottom&&M(I(d))))):c===k&&b.results?(a.preventDefault(),b.currentIndex>=1?(b.$apply(function(){b.currentIndex--,N()}),ma&&(e=L(),e<0&&M(e-1))):0===b.currentIndex&&b.$apply(function(){b.currentIndex=-1,ea.val(b.searchStr)})):c===o?b.results&&b.results.length>0&&b.showDropdown?b.currentIndex===-1&&b.overrideSuggestions?H():(b.currentIndex===-1&&(b.currentIndex=0),b.selectResult(b.results[b.currentIndex]),b.$digest()):b.searchStr&&b.searchStr.length>0&&H():c===m&&a.preventDefault()}function P(a){return function(c,d,e,f){d||e||f||!c.data||(c=c.data),b.searching=!1,Z(D(aa(c),b.remoteUrlDataField),a)}}function Q(a,c,d,e){b.searching=ka,c||d||e||(c=a.status),0!==c&&c!==-1&&(b.remoteUrlErrorCallback?b.remoteUrlErrorCallback(a,c,d,e):console&&console.error&&console.error("http error"))}function R(){ja&&ja.resolve()}function S(d){var e={},f=b.remoteUrl+encodeURIComponent(d);b.remoteUrlRequestFormatter&&(e={params:b.remoteUrlRequestFormatter(d)},f=b.remoteUrl),b.remoteUrlRequestWithCredentials&&(e.withCredentials=!0),R(),ja=a.defer(),e.timeout=ja.promise,ka=!0,c.get(f,e).then(P(d)).catch(Q).finally(function(){ka=!1})}function T(c){R(),ja=a.defer(),b.remoteApiHandler(c,ja.promise).then(P(c)).catch(Q)}function U(){b.showDropdown=!1,b.results=[],la&&(la.scrollTop=0)}function V(){b.showDropdown=ca,b.currentIndex=b.focusFirst?0:-1,b.results=[]}function W(a){var c,d,e,f,g=b.searchFields.split(","),h=[];for("undefined"!=typeof b.parseInput()&&(a=b.parseInput()(a)),c=0;c<b.localData.length;c++){for(d=!1,e=0;e<g.length;e++)f=D(b.localData[c],g[e])||"",d=d||f.toString().toLowerCase().indexOf(a.toString().toLowerCase())>=0;d&&(h[h.length]=b.localData[c])}return h}function X(a,c,d){if(!d)return!1;for(var e in c)if(c[e].toLowerCase()===d.toLowerCase())return b.selectResult(a),!0;return!1}function Y(a){!a||a.length<fa||(b.localData?b.$apply(function(){var c;c="undefined"!=typeof b.localSearch()?b.localSearch()(a,b.localData):W(a),b.searching=!1,Z(c,a)}):b.remoteApiHandler?T(a):S(a))}function Z(a,c){var d,e,f,g,h,i;if(a&&a.length>0)for(b.results=[],d=0;d<a.length;d++)b.titleField&&""!==b.titleField&&(g=h=C(a[d])),e="",b.descriptionField&&(e=i=D(a[d],b.descriptionField)),f="",b.imageField&&(f=D(a[d],b.imageField)),b.matchClass&&(h=E(g,c),i=E(e,c)),b.results[b.results.length]={title:h,description:i,image:f,originalObject:a[d]};else b.results=[];b.autoMatch&&1===b.results.length&&X(b.results[0],{title:g,desc:e||""},b.searchStr)?b.showDropdown=!1:0!==b.results.length||da?b.showDropdown=!0:b.showDropdown=!1}function $(){b.localData?(b.searching=!1,Z(b.localData,"")):b.remoteApiHandler?(b.searching=!0,T("")):(b.searching=!0,S(""))}var _,aa,ba,ca,da,ea=f.find("input"),fa=p,ga=null,ha=t,ia=null,ja=null,ka=!1,la=f[0].querySelector(".angucomplete-dropdown"),ma=!1,na=null;f.on("mousedown",function(a){a.target.id?(na=a.target.id,na===b.id+"_dropdown"&&document.body.addEventListener("click",x)):na=a.target.className}),b.currentIndex=b.focusFirst?0:null,b.searching=!1,ba=b.$watch("initialValue",function(a){a&&(ba(),w(a,!0))}),b.$watch("fieldRequired",function(a,c){a!==c&&(a?F(ia&&b.currentIndex!==-1?!0:!1):h[b.inputName].$setValidity(ha,!0))}),b.$on("angucomplete-alt:clearInput",function(a,c){c&&c!==b.id||(b.searchStr=null,z(),F(!1),U())}),b.$on("angucomplete-alt:changeInput",function(a,c,d){c&&c===b.id&&w(d)}),b.onFocusHandler=function(){b.focusIn&&b.focusIn(),0!==fa||b.searchStr&&0!==b.searchStr.length||(b.currentIndex=b.focusFirst?0:b.currentIndex,b.showDropdown=!0,$())},b.hideResults=function(){na&&(na===b.id+"_dropdown"||na.indexOf("angucomplete")>=0)?na=null:(_=e(function(){U(),b.$apply(function(){b.searchStr&&b.searchStr.length>0&&ea.val(b.searchStr)})},s),R(),b.focusOut&&b.focusOut(),b.overrideSuggestions&&b.searchStr&&b.searchStr.length>0&&b.currentIndex===-1&&H())},b.resetHideResults=function(){_&&e.cancel(_)},b.hoverRow=function(a){b.currentIndex=a},b.selectResult=function(a){b.matchClass&&(a.title=C(a.originalObject),a.description=D(a.originalObject,b.descriptionField)),b.clearSelected?b.searchStr=null:b.searchStr=a.title,z(a),U()},b.inputChangeHandler=function(a){return a.length<fa?(R(),U()):0===a.length&&0===fa&&$(),b.inputChanged&&(a=b.inputChanged(a)),a},b.fieldRequiredClass&&""!==b.fieldRequiredClass&&(ha=b.fieldRequiredClass),b.minlength&&""!==b.minlength&&(fa=parseInt(b.minlength,10)),b.pause||(b.pause=r),b.clearSelected||(b.clearSelected=!1),b.overrideSuggestions||(b.overrideSuggestions=!1),b.fieldRequired&&h&&F(b.initialValue?!0:!1),b.inputType=g.type?g.type:"text",b.textSearching=g.textSearching?g.textSearching:u,b.textNoResults=g.textNoResults?g.textNoResults:v,ca="false"!==b.textSearching,da="false"!==b.textNoResults,b.maxlength=g.maxlength?g.maxlength:q,ea.on("keydown",O),ea.on("keyup compositionend",G),aa=A("remoteUrlResponseFormatter"),e(function(){var a=getComputedStyle(la);ma=a.maxHeight&&"auto"===a.overflowY})}var i=40,j=39,k=38,l=37,m=27,n=13,o=9,p=3,q=524288,r=500,s=200,t="autocomplete-required",u="Searching...",v="No results found",w="/angucomplete-alt/index.html";return f.put(w,'<div class="angucomplete-holder" ng-class="{\'angucomplete-dropdown-visible\': showDropdown}">  <input id="{{id}}_value" name="{{inputName}}" tabindex="{{fieldTabindex}}" ng-class="{\'angucomplete-input-not-empty\': notEmpty}" ng-model="searchStr" ng-disabled="disableInput" type="{{inputType}}" placeholder="{{placeholder}}" maxlength="{{maxlength}}" ng-focus="onFocusHandler()" class="{{inputClass}}" ng-focus="resetHideResults()" ng-blur="hideResults($event)" autocapitalize="off" autocorrect="off" autocomplete="off" ng-change="inputChangeHandler(searchStr)"/>  <div id="{{id}}_dropdown" class="angucomplete-dropdown" ng-show="showDropdown">    <div class="angucomplete-searching" ng-show="searching" ng-bind="textSearching"></div>    <div class="angucomplete-searching" ng-show="!searching && (!results || results.length == 0)" ng-bind="textNoResults"></div>    <div class="angucomplete-row" ng-repeat="result in results" ng-click="selectResult(result)" ng-mouseenter="hoverRow($index)" ng-class="{\'angucomplete-selected-row\': $index == currentIndex}">      <div ng-if="imageField" class="angucomplete-image-holder">        <img ng-if="result.image && result.image != \'\'" ng-src="{{result.image}}" class="angucomplete-image"/>        <div ng-if="!result.image && result.image != \'\'" class="angucomplete-image-default"></div>      </div>      <div class="angucomplete-title" ng-if="matchClass" ng-bind-html="result.title"></div>      <div class="angucomplete-title" ng-if="!matchClass">{{ result.title }}</div>      <div ng-if="matchClass && result.description && result.description != \'\'" class="angucomplete-description" ng-bind-html="result.description"></div>      <div ng-if="!matchClass && result.description && result.description != \'\'" class="angucomplete-description">{{result.description}}</div>    </div>  </div></div>'),{restrict:"EA",require:"^?form",scope:{selectedObject:"=",selectedObjectData:"=",disableInput:"=",initialValue:"=",localData:"=",localSearch:"&",remoteUrlRequestFormatter:"=",remoteUrlRequestWithCredentials:"@",remoteUrlResponseFormatter:"=",remoteUrlErrorCallback:"=",remoteApiHandler:"=",id:"@",type:"@",placeholder:"@",textSearching:"@",textNoResults:"@",remoteUrl:"@",remoteUrlDataField:"@",titleField:"@",descriptionField:"@",imageField:"@",inputClass:"@",pause:"@",searchFields:"@",minlength:"@",matchClass:"@",clearSelected:"@",overrideSuggestions:"@",fieldRequired:"=",fieldRequiredClass:"@",inputChanged:"=",autoMatch:"@",focusOut:"&",focusIn:"&",fieldTabindex:"@",inputName:"@",focusFirst:"@",parseInput:"&"},templateUrl:function(a,b){return b.templateUrl||w},compile:function(a){var b=g.startSymbol(),c=g.endSymbol();if("{{"!==b||"}}"!==c){var d=a.html().replace(/\{\{/g,b).replace(/\}\}/g,c);a.html(d)}return h}}}])}),angular.module("List",["angucomplete-alt"]).component("scriptrAutocomplete",{bindings:{placeholder:"@",maxlength:"@",pause:"@",selectedObject:"<?",selectedObjectData:"<?",titleField:"@",descriptionField:"@",imageField:"@",minlength:"@",inputName:"@",inputClass:"@",matchClass:"@",localData:"<?",searchFields:"@",clearSelected:"@",overrideSuggestions:"@",fieldRequired:"@",fieldRequiredClass:"@",textSearching:"@",textNoResults:"@",initialValue:"@",inputChanged:"&",autoMatch:"@",focusIn:"&",focusOut:"&",disableInput:"@",focusFirst:"@",fieldTabindex:"@",parseInput:"&",localSearch:"&",transport:"@",api:"@",onFormatData:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/list/autocomplete.html",controller:["wsClient","httpClient",function(a,b){var c=this;this.$onInit=function(){this.localData=this.localData?this.localData:[],this.fieldRequired="undefined"!=typeof this.fieldRequired&&this.fieldRequired,this.textSearching="undefined"!=typeof this.textSearching&&this.textSearching,this.transport=this.transport?this.transport:"wss",d(this.transport)};var d=function(d){"wss"==d?a.onReady.then(function(){a.subscribe(c.msgTag,c.consumeData.bind(c)),c.api&&a.call(c.api,c.apiParams,c.msgTag).then(function(a,b){c.consumeData(a)})}):"https"==d&&c.api&&b.get(c.api,c.apiParams).then(function(a,b){c.consumeData(a)},function(a){console.log("reject published promise",a)})};this.consumeData=function(a,b){"function"==typeof this.onFormatData()&&(a=this.onFormatData()(a)),this.localData=a}}]}),angular.module("Chart",["angular.morris"]),angular.element(document).ready(function(){Morris.Donut.prototype.resizeHandler=function(){return this.timeoutId=null,this.el&&this.el.width()>0&&this.el.height()>0?(this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()):null},Morris.Donut.prototype.setData=function(a){var b;return this.data=a,this.values=function(){var a,c,d,e;for(d=this.data,e=[],a=0,c=d.length;a<c;a++)b=d[a],e.push(parseFloat(b.value));return e}.call(this),this.el&&this.el.width()>0&&this.el.height()>0?this.redraw():null}}),angular.module("Chart").component("scriptrChart",{bindings:{onLoad:"&onLoad",resize:"<?",data:"<?",type:"@",xkey:"@",ykeys:"<?",stacked:"<?",labels:"<?",colors:"@",api:"@",transport:"@",msgTag:"@",apiParams:"<?",onFormatData:"&",lineWidth:"@",pointSize:"@",pointFillColors:"@",pointStrokeColors:"@",ymax:"@",ymin:"@",smooth:"@",hideHover:"@",parseTime:"@",units:"@",postUnits:"@",preUnits:"@",xlabels:"@",xlabelAngle:"<?",goals:"@",goalStrokeWidth:"@",goalLineColors:"@",events:"@",eventStrokeWidth:"@",eventLineColors:"@",continuousLine:"@",axes:"@",grid:"@",gridTextColor:"@",gridTextSize:"@",gridTextFamily:"@",gridTextWeight:"@",fillOpacity:"@",resize:"@",behaveLikeLine:"@",labelColor:"@",donutFormatter:"&",backgroundColor:"@",hoverCallback:"&?",dateFormat:"&?",xlabelFormat:"&?",ylabelFormat:"&?"},templateUrl:"/UIComponents/dashboard/frontend/components/chart/chart.html",controller:["httpClient","wsClient",function(a,b){var c=this;this.$onInit=function(){this.data=this.data?this.data:null,this.colors=this.colors?this.colors:["#CC5464","#FCC717","#38B9D6","#1DBC68","#E90088"],this.stacked=!!this.stacked&&this.stacked,this.resize=!this.resize||this.resize,this.labelColor=this.labelColor?this.labelColor:"#666",this.backgroundColor=this.backgroundColor?this.backgroundColor:"#eee",this.transport=this.transport?this.transport:"wss",this.msgTag=this.msgTag?this.msgTag:null,console.log(this.type,this.xlabelAngle)},this.$postLink=function(){d(this.transport)};var d=function(d){"wss"==d?b.onReady.then(function(){b.subscribe(c.msgTag,c.consumeData.bind(c)),c.api&&b.call(c.api,c.apiParams,c.msgTag).then(function(a,b){c.consumeData(a)})}):"https"==d&&c.api&&a.get(c.api,c.apiParams).then(function(a,b){c.consumeData(a)},function(a){console.log("reject published promise",a)})};this.consumeData=function(a,b){"function"==typeof c.onFormatData()&&(a=c.onFormatData()(a)),this.data=a}}]}),agGrid.initialiseAgGridWithAngular1(angular),angular.module("Grid",["agGrid"]),angular.module("Grid").component("scriptrGrid",{bindings:{onLoad:"&onLoad",columnsDefinition:"<columnsDefinition",enableServerSideSorting:"<?",enableServerSideFilter:"<?",enableColResize:"<?",enableDeleteRow:"<?",enableAddRow:"<?",cellEditable:"<?",enableSorting:"<?",api:"@",onCellValueChangedScript:"@",onDeleteRowScript:"@",transport:"@",enableClientSideFilter:"<?",rowModelType:"@",rowModelSelection:"@",rowDeselection:"<?",rowData:"<?",gridHeight:"@",paginationPageSize:"<?",paginationOverflowSize:"<?",maxConcurrentDatasourceRequests:"<?",paginationInitialRowCount:"<?",maxPagesInCache:"<?",apiParams:"<?",onFormatData:"&",removeRowMsgTag:"@",addRowMsgTag:"@",onGridReady:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/grid/grid.html",controller:["$window","$timeout","dataService",function(a,b,c){var d=this;this.dataSource={getRows:function(a){var b=d.buildParams(a),e=null;"function"==typeof d.onFormatData()&&(e=function(a){return d.onFormatData()(a)});c.getGridData(d.api,b,d.transport,e).then(function(b,c){if(b&&b.documents){var e=b.documents,f=parseInt(b.count);if(a.successCallback(e,f),d.gridOptions.api.sizeColumnsToFit(),null==e||0==e.length){var g=angular.element(document.querySelector("#btNext"));g.attr("disabled","true")}}else a.failCallback()},function(a){console.log("reject",a)})}},this._createNewDatasource=function(){this.gridOptions.api.setDatasource(this.dataSource)};for(var e=0;e<this.columnsDefinition.length;e++)this.columnsDefinition[e].hasOwnProperty("type")&&"numeric"==this.columnsDefinition[e].type&&(this.columnsDefinition[e].filter="number");this.$onInit=function(){this.gridOptions={angularCompileRows:!0,enableSorting:"undefined"==typeof this.enableSorting||this.enableSorting,enableServerSideSorting:"undefined"==typeof this.enableServerSideSorting||this.enableServerSideSorting,enableServerSideFilter:"undefined"==typeof this.enableServerSideFilter||this.enableServerSideFilter,enableColResize:"undefined"!=typeof this.enableColResize&&this.enableColResize,enableFilter:"undefined"==typeof this.enableFilter||this.enableFilter,columnDefs:this.columnsDefinition,rowData:this.rowData?this.rowData:null,rowModelType:this.rowModelType?this.rowModelType:this.rowData?"normal":"virtual",rowSelection:this.rowModelSelection?this.rowModelSelection:"multiple",paginationPageSize:this.paginationPageSize?this.paginationPageSize:50,overlayLoadingTemplate:'<span class="ag-overlay-loading-center"><i class="fa fa-spinner fa-spin fa-fw fa-2x"></i> Please wait while your rows are loading</span>',defaultColDef:{filterParams:{apply:!0},editable:"undefined"==typeof this.cellEditable||this.cellEditable},onCellValueChanged:function(a){d._saveData(d.onCellValueChangedScript,a),d.oldEditedValue=a.oldValue,d.editedColumn=a.colDef.field,d.editedChildIndex=a.node.childIndex||a.node.id},onGridReady:function(a){console.log("the grid is now ready"),"function"==typeof d.onGridReady()&&d.onGridReady()(d),a.api.sizeColumnsToFit(),a.api.filterManager.availableFilters.text.CONTAINS="startsWith","undefined"!=typeof d.rowData&&null!=d.rowData||d._createNewDatasource()}},this.gridHeight=this.gridHeight?this.gridHeight:"500",this.transport=this.transport?this.transport:"wss",this.removeRowMsgTag=this.removeRowMsgTag?this.removeRowMsgTag:"remove",this.addRowMsgTag=this.addRowMsgTag?this.addRowMsgTag:"add",this.enableDeleteRow=1!=this.enableDeleteRow,this.enableAddRow=1!=this.enableAddRow,this.enableClientSideFilter=1!=this.enableClientSideFilter,this.enableServerSideFilter=1!=this.enableServerSideFilter,c.subscribe(this.onRemoveRowWebSocketCall,d.removeRowMsgTag),c.subscribe(this.onEditRowWebSocketCall,d.addRowMsgTag),angular.element(a).bind("resize",function(){d.gridOptions.api.sizeColumnsToFit()})},this._saveData=function(a,b){c.gridHelper(a,b.data)},this.onAddRow=function(){for(var a={},b=0;b<d.gridOptions.columnDefs.length;b++)a[d.gridOptions.columnDefs[b].field]="";d.gridOptions.api.insertItemsAtIndex(0,[a]),d.gridOptions.api.setFocusedCell(0,d.gridOptions.columnDefs[0].field),d.gridOptions.api.startEditingCell({rowIndex:0,colKey:d.gridOptions.columnDefs[0].field,charPress:d.gridOptions.columnDefs[0].field})},this.onEditRowWebSocketCall=function(a){if(a&&a.result){var c=a.result,e=c.key||c["apsdb.documentKey"];if("pagination"==d.gridOptions.rowModelType){d.gridOptions.api.forEachNode(function(a){if(a.data.key==e){var b=a.childIndex,f=d.gridOptions.api.getModel(),a=[f.getRow(b)][0];a.data=c,d.gridOptions.api.refreshView()}});var f=d.gridOptions.api.getRenderedNodes()[0];f.data.key||(f.data.key=e)}else{var f=d.gridOptions.api.getRenderedNodes()[0];f.data.key||(f.data.key=e),d.gridOptions.api.refreshVirtualPageCache()}}else{if(d.oldEditedValue){d.gridOptions.api.forEachNode(function(a){a.childIndex!=d.editedChildIndex&&a.id!=d.editedChildIndex||a.setSelected(!0,!0)});var g=d.gridOptions.api.getSelectedNodes()[0];g.data[d.editedColumn]=d.oldEditedValue,d.gridOptions.api.refreshView()}else{d.gridOptions.api.forEachNode(function(a){0!=a.childIndex&&0!=a.id||a.setSelected(!0,!0)});var g=d.gridOptions.api.getSelectedNodes();d.gridOptions.api.removeItems(g)}d.msg="an error has occurred",d.showError=!0,b(function(){d.showError=!1},5e3)}},this.onRemoveRow=function(a){var b=d.gridOptions.api.getSelectedNodes();"normal"==d.gridOptions.rowModelType&&d.gridOptions.api.removeItems(b);for(var e=[],f=0;f<b.length;f++)e.push(b[f].data.key);c.gridHelper(d.onDeleteRowScript,{keys:e})},this.onRemoveRowWebSocketCall=function(a){if(a&&a.result){var c=a.result;if("pagination"==d.gridOptions.rowModelType)for(var e=0;e<c.length;e++)d.gridOptions.api.forEachNode(function(a){if(a.data.key==c[e]){var b=a.childIndex,f=d.gridOptions.api.getModel(),a=[f.getRow(b)];d.gridOptions.api.removeItems(a)}});else d.gridOptions.api.refreshVirtualPageCache()}else d.msg="an error has occurred",d.showError=!0,b(function(){d.showError=!1},5e3)},this.onFilterChanged=function(){this.gridOptions.enableServerSideFilter=!1,this.gridOptions.api.setQuickFilter(this.quickFilterValue),this.gridOptions.enableServerSideFilter=!0},this.buildParams=function(a){var b=this.gridOptions.quickFilterText,c=null,d=a.endRow/this.gridOptions.paginationPageSize;if(a.sortModel&&a.sortModel.length>0){var e=a.sortModel[0].sort,f=a.sortModel[0].colId;c=this.gridOptions.api.getColumnDef(f).type?this.gridOptions.api.getColumnDef(f).type:null}if(a.filterModel)for(p in a.filterModel){b=a.filterModel[p].filter;var g=a.filterModel[p].type,h=p;c=this.gridOptions.api.getColumnDef(h).type?this.gridOptions.api.getColumnDef(h).type:null}var i={resultsPerPage:this.gridOptions.paginationPageSize,pageNumber:d};if(f&&(i.sortingColumnName=f),h&&(i.filterColumnName=h),e&&(i.sort=e),c&&(i.sortType=c),b&&(i.queryFilter=b),g&&(i.queryType=g),i.startRow=a.startRow,i.endRow=a.endRow,this.apiParams)for(var j in this.apiParams)i[j]=this.apiParams[j];return i}}]}),angular.module("Grid").service("dataService",["httpClient","wsClient","$q",function(a,b,c){this.subscribe=function(a,c){b.onReady.then(function(){b.subscribe(c,a.bind(self))})},this.gridHelper=function(a,d){var e=c.defer();return b.call(a,d,"grid").then(function(a,b){e.resolve(a,b)},function(a){e.reject(a)}),e.promise},this.getGridData=function(d,e,f,g){var h=c.defer();return"https"==f?(a.get(d,e).then(function(a,b){if(g&&(a=g(a)),a&&a.documents){var a={documents:a.documents,count:a.count};h.resolve(a,b)}else h.resolve(null,b)},function(a){h.reject(a)}),h.promise):"wss"==f?d&&"undefined"!=typeof d?(b.onReady.then(function(){b.call(d,e,"grid").then(function(a,b){if(g&&(a=g(a)),a&&a.documents){var a={documents:a.documents,count:a.count};h.resolve(a,b)}else h.resolve(null,b)},function(a){h.reject(a)})}),h.promise):(b.onReady.then(function(){b.publish(e,"publish").then(function(a,b){if(a&&a.documents){var a={documents:a.documents,count:a.count};h.resolve(a,b)}else h.resolve(null,b)},function(a){h.reject(a)})}),h.promise):void 0}}]),angular.module("Gauge",["frapontillo.gage"]),angular.module("Gauge").component("scriptrGauge",{bindings:{onLoad:"&onLoad",api:"@",transport:"@",msgTag:"@",apiParams:"@",valueFontColor:"@",min:"@",max:"@",hideMinMax:"@",hideValue:"@",hideInnerShadow:"@",gaugeColor:"@",showInnerShadow:"@",gaugeValue:"@",customSectors:"<?",shadowSize:"@",shadowOpacity:"@",label:"@",labelFontColor:"@",startAnimationType:"@",refreshAnimationType:"@",onFormatData:"&",counter:"@",width:"@",height:"@"},templateUrl:"/UIComponents/dashboard/frontend/components/gauge/gauge.html",controller:["httpClient","wsClient",function(a,b){var c=this;this.$onInit=function(){this.gaugeValue=this.gaugeValue?this.gaugeValue:0,this.customSectors=this.customSectors?this.customSectors:[{color:"#A3CD3B",lo:0,hi:25},{color:"#FF4A43",lo:25,hi:100}],this.valueFontColor=this.valueFontColor?this.valueFontColor:"#999",this.min=this.min?this.min:0,this.max=this.max?this.max:100,this.hideMinMax=!!this.hideMinMax&&this.hideMinMax,
this.hideValue=!!this.hideValue&&this.hideValue,this.hideInnerShadow=!this.hideInnerShadow||this.hideInnerShadow,this.gaugeColor=this.gaugeColor?this.gaugeColor:"#e9e9e9",this.showInnerShadow=!!this.showInnerShadow&&this.showInnerShadow,this.shadowSize=this.shadowSize?this.shadowSize:0,this.shadowOpacity=this.shadowOpacity?this.shadowOpacity:0,this.label=this.label?this.label:"",this.labelFontColor=this.labelFontColor?this.labelFontColor:"#666",this.startAnimationType=this.startAnimationType?this.startAnimationType:"linear",this.refreshAnimationType=this.refreshAnimationType?this.refreshAnimationType:"linear",this.counter=!this.counter||this.counter,this.transport=this.transport?this.transport:"wss",this.msgTag=this.msgTag?this.msgTag:null,this.width=this.width?this.width:50,this.height=this.height?this.height:300,d(this.transport)};var d=function(d){"wss"==d?b.onReady.then(function(){b.subscribe(c.msgTag,c.consumeData.bind(c)),c.api&&b.call(c.api,c.apiParams,c.msgTag).then(function(a,b){c.consumeData(a)})}):"https"==d&&c.api&&a.get(c.api,c.apiParams).then(function(a,b){c.consumeData(a)},function(a){console.log("reject published promise",a)})};this.consumeData=function(a,b){"function"==typeof this.onFormatData()&&(a=this.onFormatData()(a)),this.gaugeValue=a}}]});var templates=["$templateCache",function(a){"use strict";a.put("/UIComponents/dashboard/frontend/components/chart/chart.html",'<div class="text-center loading" ng-hide=$ctrl.data><i class="fa fa-spinner fa-spin fa-3x"></i></div><div ng-if=$ctrl.data><div ng-if="$ctrl.type == \'line\'" line-data=$ctrl.data line-xkey={{$ctrl.xkey}} line-ykeys=$ctrl.ykeys line-labels=$ctrl.labels line-colors=$ctrl.colors line-line-width=$ctrl.lineWidth line-point-size=$ctrl.pointSize line-point-fill-colors=$ctrl.pointFillColors line-point-stroke-colors=$ctrl.pointStrokeColors line-ymax=$ctrl.ymax line-ymin=$ctrl.ymin line-smooth=$ctrl.smooth line-hide-hover=$ctrl.hideHover line-hover-callback="$ctrl.hoverCallback(index, options, content, row)" line-parse-time=$ctrl.parseTime line-units=$ctrl.units line-post-units=$ctrl.postUnits line-pre-units=$ctrl.preUnits line-line-date-format=$ctrl.dateFormat(x) line-x-labels=$ctrl.xlabels line-x-label-format=$ctrl.xlabelFormat(x) line-x-label-angle=$ctrl.xlabelAngle line-y-label-format=$ctrl.ylabelFormat(y) line-goals=$ctrl.goals line-goal-stroke-width=$ctrl.goalStrokeWidth line-goal-line-colors=$ctrl.goalLineColors line-events=$ctrl.events line-event-stroke-width=$ctrl.eventStrokeWidth line-event-line-colors=$ctrl.eventLineColors line-continuous-line=$ctrl.continuousLine line-axes=$ctrl.axes line-grid=$ctrl.grid line-grid-text-color=$ctrl.gridTextColor line-grid-text-size=$ctrl.gridTextSize , line-grid-text-family=$ctrl.gridTextFamily line-grid-text-weight=$ctrl.gridTextWeight line-fill-opacity=$ctrl.fillOpacity line-resize=$ctrl.resize line-chart></div><div ng-if="$ctrl.type == \'bar\'" bar-data=$ctrl.data bar-x={{$ctrl.xkey}} bar-y=$ctrl.ykeys bar-labels=$ctrl.labels bar-colors=$ctrl.colors bar-resize=$ctrl.resize bar-stacked=$ctrl.stacked bar-hide-hover=$ctrl.hideHover bar-hover-callback="$ctrl.hoverCallback(index, options, content, row)" bar-grid=$ctrl.grid bar-grid-text-color=$ctrl.gridTextColor bar-grid-text-size=$ctrl.gridTextSize , bar-grid-text-family=$ctrl.gridTextFamily bar-grid-text-weight=$ctrl.gridTextWeight bar-axes=$ctrl.axes bar-ymax=$ctrl.ymax bar-ymin=$ctrl.ymin bar-goals=$ctrl.goals bar-goal-stroke-width=$ctrl.goalStrokeWidth bar-goal-line-colors=$ctrl.goalLineColors bar-x-label-angle=$ctrl.xlabelAngle bar-y-label-format=$ctrl.ylabelFormat(y) bar-parse-time=$ctrl.parseTime bar-events=$ctrl.events bar-event-stroke-width=$ctrl.eventStrokeWidth bar-event-line-colors=$ctrl.eventLineColors bar-post-units=$ctrl.postUnits bar-pre-units=$ctrl.preUnits bar-chart></div><div ng-if="$ctrl.type == \'area\'" area-chart line-colors=$ctrl.colors area-data=$ctrl.data area-xkey={{$ctrl.xkey}} area-ykeys=$ctrl.ykeys area-labels=$ctrl.labels area-line-width=$ctrl.lineWidth area-point-size=$ctrl.pointSize area-point-fill-colors=$ctrl.pointFillColors area-point-stroke-colors=$ctrl.pointStrokeColors area-ymax=$ctrl.ymax area-ymin=$ctrl.ymin area-smooth=$ctrl.smooth area-hide-hover=$ctrl.hideHover area-hover-callback="$ctrl.hoverCallback(index, options, content, row)" area-parse-time=$ctrl.parseTime area-units=$ctrl.units area-post-units=$ctrl.postUnits area-pre-units=$ctrl.preUnits area-area-date-format=$ctrl.dateFormat(x) area-x-labels=$ctrl.xlabels area-x-label-format=$ctrl.xlabelFormat(x) area-x-label-angle=$ctrl.xlabelAngle area-y-label-format=$ctrl.ylabelFormat(y) area-goals=$ctrl.goals area-goal-stroke-width=$ctrl.goalStrokeWidth area-goal-line-colors=$ctrl.goalLineColors area-events=$ctrl.events area-event-stroke-width=$ctrl.eventStrokeWidth area-event-line-colors=$ctrl.eventLineColors area-continuous-line=$ctrl.continuousLine area-axes=$ctrl.axes area-grid=$ctrl.grid area-grid-text-color=$ctrl.gridTextColor area-grid-text-size=$ctrl.gridTextSize , area-grid-text-family=$ctrl.gridTextFamily area-grid-text-weight=$ctrl.gridTextWeight area-fill-opacity=$ctrl.fillOpacity area-resize=$ctrl.resize area-behave-like-line=$ctrl.behaveLikeLine></div><div ng-if="$ctrl.type == \'donut\'" donut-data=$ctrl.data donut-label-color=$ctrl.labelColor donut-background-color=$ctrl.backgroundColor donut-colors=$ctrl.colors donut-formatter=$ctrl.donutFormatter(y,data) donut-resize=$ctrl.resize donut-chart></div></div>'),a.put("/UIComponents/dashboard/frontend/components/gauge/gauge.html",'<div style="width: {{$ctrl.width}}%; height: {{$ctrl.height}}px" class=gauge><div value={{$ctrl.gaugeValue}} value-font-color={{$ctrl.valueFontColor}} min={{$ctrl.min}} max={{$ctrl.max}} hide-min-max={{$ctrl.hideMinMax}} hide-value={{$ctrl.hideValue}} hide-inner-shadow={{$ctrl.hideInnerShadow}} gauge-color={{$ctrl.gaugeColor}} show-inner-shadow={{$ctrl.showInnerShadow}} shadow-opacity={{$ctrl.shadowOpacity}} shadow-size={{$ctrl.shadowSize}} custom-sectors={{$ctrl.customSectors}} label={{$ctrl.label}} label-font-color={{$ctrl.labelFontColor}} start-animation-type={{$ctrl.startAnimationType}} refresh-animation-type={{$ctrl.refreshAnimationType}} counter={{$ctrl.counter}} justgage></div></div>'),a.put("/UIComponents/dashboard/frontend/components/grid/grid.html",'<div class=filter-bar><form><div ng-hide={{$ctrl.enableClientSideFilter}} class="form-group col-xs-12 col-sm-4"><div class=input-group><div class=input-group-addon>Client filtering</div><input class=form-control ng-change=$ctrl.onFilterChanged() ng-model=$ctrl.quickFilterValue placeholder="Type text to filter..."></div></div><div ng-hide={{$ctrl.enableServerSideFilter}} class="form-group col-xs-12 col-sm-4"><div class=input-group><div class=input-group-addon>Server filtering</div><input class=form-control ng-model=$ctrl.gridOptions.quickFilterText placeholder="Type text to filter..."></div></div><div class="col-xs-12 col-sm-4 text-right"><button ng-hide={{$ctrl.enableDeleteRow}} ng-click=$ctrl.onRemoveRow() class="btn btn-danger"><i class="fa fa-close" aria-hidden=true></i> Delete selected row</button> <button ng-hide={{$ctrl.enableAddRow}} ng-click=$ctrl.onAddRow() class="btn btn-success"><i class="fa fa-plus" aria-hidden=true></i> Insert row</button></div></form></div><div class=col-xs-12 ng-show=$ctrl.showError><div class="alert alert-danger">{{$ctrl.msg}}</div></div><div class=clearfix></div><div class=col-xs-12><div ag-grid=$ctrl.gridOptions class=ag-bootstrap style="height: {{$ctrl.gridHeight}}px; clear: left; width: 100%"></div></div>'),a.put("/UIComponents/dashboard/frontend/components/odometer/odometer.html",'<div style="font-size: {{$ctrl.size}}em"><span odometer=$ctrl.odometerValue odometer-options=$ctrl.odometerOptions></span></div>'),a.put("/UIComponents/dashboard/frontend/components/searchBox/searchBox.html",'<form><div class=row><div class="col-xs-12 col-sm-9"><input class="form-control input-sm" ng-keyup="$event.keyCode == 13 ? $ctrl.onFilterChanged() : null" ng-model=$ctrl.searchValue placeholder="Type text to search..."></div><div class="col-xs-12 col-sm-3 button-wrapper"><button ng-click=$ctrl.onFilterChanged() class="btn btn-warning btn-sm">Go</button></div></div></form><body><abn-tree tree-data=$ctrl.treeData tree-control=$ctrl.treeControl icon-leaf={{$ctrl.iconLeaf}} icon-expand={{$ctrl.iconExpand}} icon-collapse={{$ctrl.iconCollapse}} on-select=$ctrl.onSelect(branch) expand-level=$ctrl.expandLevel initial-selection=$ctrl.initialSelection></abn-tree></body>'),a.put("/UIComponents/dashboard/frontend/components/speedometer/speedometer.html","<meter-gauge gaugeconfig=$ctrl.classic></meter-gauge>")}];angular.module("SearchBox",["angularBootstrapNavTree"]).component("scriptrSearchbox",{bindings:{treeControl:"<?",treeData:"<?",iconLeaf:"@",paramName:"@",iconExpand:"@",iconCollapse:"@",onSelect:"<?",expandLevel:"@",initialSelection:"@",apiParams:"<?",transport:"@",api:"@",onFormatData:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/searchBox/searchBox.html",controller:["wsClient","httpClient",function(a,b){var c=this;this.iconExpand=this.iconExpand?this.iconExpand:null,this.$onInit=function(){this.iconLeaf=this.iconLeaf?this.iconLeaf:"icon-file  glyphicon glyphicon-file  fa fa-file",this.iconExpand=this.iconExpand?this.iconExpand:"iicon-plus  glyphicon glyphicon-plus  fa fa-plus",this.iconCollapse=this.iconCollapse?this.iconCollapse:"icon-minus glyphicon glyphicon-minus fa fa-minus",this.paramName=this.paramName?this.paramName:"criteria",this.treeData=this.treeData?this.treeData:[],this.iconLeaf=this.iconLeaf?this.iconLeaf:null,this.transport=this.transport?this.transport:"wss"},this.onFilterChanged=function(){console.log("submit"),null!=this.searchValue&&""!=this.searchValue&&d(this.transport,this.searchValue)};var d=function(d,e){var f={};if(f[c.paramName]=e,c.apiParams)for(var g in c.apiParams)f[g]=c.apiParams[g];"wss"==d?a.onReady.then(function(){a.subscribe(c.msgTag,c.consumeData.bind(c)),c.api&&a.call(c.api,f,c.msgTag).then(function(a,b){c.consumeData(a)})}):"https"==d&&c.api&&b.get(c.api,f).then(function(a,b){c.consumeData(a)},function(a){console.log("reject published promise",a)})};this.consumeData=function(a,b){"function"==typeof c.onFormatData()&&(a=c.onFormatData()(a)),console.log("display tree"),this.treeData=a}}]});